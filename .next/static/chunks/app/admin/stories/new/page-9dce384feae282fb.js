(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[291,647],{216:function(e,r,t){Promise.resolve().then(t.bind(t,4022)),Promise.resolve().then(t.t.bind(t,2972,23))},4022:function(e,r,t){"use strict";t.d(r,{default:function(){return n}});var s=t(7437),a=t(2265),o=t(9376);function n(e){let{initialData:r,isNew:t=!1}=e,n=(0,o.useRouter)(),[c,d]=(0,a.useState)(r||{title_ar:"",title_en:"",slug:"",excerpt_ar:"",body_markdown_ar:"",cover_image:"",status:"draft"}),[l,i]=(0,a.useState)(!1),u=async e=>{e.preventDefault(),i(!0);let s=t?"/api/admin/stories":"/api/admin/stories/".concat(r.id),a=c.body_markdown_ar.replace(/^# (.*$)/gim,"<h1>$1</h1>").replace(/^## (.*$)/gim,"<h2>$1</h2>").replace(/\n/gim,"<br />");try{(await fetch(s,{method:t?"POST":"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...c,body_html_ar:a})})).ok?(n.push("/admin/stories"),n.refresh()):alert("حدث خطأ أثناء الحفظ")}catch(e){console.error(e),alert("حدث خطأ")}finally{i(!1)}};return(0,s.jsxs)("form",{onSubmit:u,className:"bg-secondary-1 p-8 rounded-lg shadow-lg border border-secondary-2",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold mb-2 text-accent",children:"العنوان (عربي)"}),(0,s.jsx)("input",{type:"text",required:!0,className:"w-full p-3 bg-secondary-2 border border-secondary-2 rounded focus:border-accent focus:outline-none text-secondary-3",value:c.title_ar,onChange:e=>d({...c,title_ar:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold mb-2 text-accent",children:"العنوان (إنجليزي - اختياري)"}),(0,s.jsx)("input",{type:"text",className:"w-full p-3 bg-secondary-2 border border-secondary-2 rounded focus:border-accent focus:outline-none text-secondary-3",value:c.title_en||"",onChange:e=>d({...c,title_en:e.target.value}),dir:"ltr"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold mb-2 text-accent",children:"الرابط (Slug)"}),(0,s.jsx)("input",{type:"text",className:"w-full p-3 bg-secondary-2 border border-secondary-2 rounded focus:border-accent focus:outline-none text-secondary-3",value:c.slug,onChange:e=>d({...c,slug:e.target.value}),dir:"ltr"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold mb-2 text-accent",children:"صورة الغلاف (رابط)"}),(0,s.jsx)("input",{type:"text",required:!0,className:"w-full p-3 bg-secondary-2 border border-secondary-2 rounded focus:border-accent focus:outline-none text-secondary-3",value:c.cover_image,onChange:e=>d({...c,cover_image:e.target.value}),dir:"ltr"})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-bold mb-2 text-accent",children:"مقتطف قصير"}),(0,s.jsx)("textarea",{required:!0,rows:3,className:"w-full p-3 bg-secondary-2 border border-secondary-2 rounded focus:border-accent focus:outline-none text-secondary-3",value:c.excerpt_ar,onChange:e=>d({...c,excerpt_ar:e.target.value})})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-bold mb-2 text-accent",children:"محتوى القصة (Markdown)"}),(0,s.jsx)("textarea",{required:!0,rows:15,className:"w-full p-3 bg-secondary-2 border border-secondary-2 rounded focus:border-accent focus:outline-none text-secondary-3 font-mono",value:c.body_markdown_ar,onChange:e=>d({...c,body_markdown_ar:e.target.value})})]}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("label",{className:"block text-sm font-bold mb-2 text-accent",children:"الحالة"}),(0,s.jsxs)("select",{className:"w-full p-3 bg-secondary-2 border border-secondary-2 rounded focus:border-accent focus:outline-none text-secondary-3",value:c.status,onChange:e=>d({...c,status:e.target.value}),children:[(0,s.jsx)("option",{value:"draft",children:"مسودة"}),(0,s.jsx)("option",{value:"published",children:"منشور"}),(0,s.jsx)("option",{value:"archived",children:"مؤرشف"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>n.back(),className:"px-6 py-3 rounded text-secondary-3 hover:bg-secondary-2 transition-colors",children:"إلغاء"}),(0,s.jsx)("button",{type:"submit",disabled:l,className:"bg-primary-2 text-secondary-3 px-8 py-3 rounded font-bold hover:bg-red-900 transition-colors disabled:opacity-50",children:l?"جاري الحفظ...":"حفظ القصة"})]})]})}},9376:function(e,r,t){"use strict";var s=t(5475);t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=216)}),_N_E=e.O()}]);