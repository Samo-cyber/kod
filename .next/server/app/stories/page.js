(()=>{var e={};e.id=747,e.ids=[747],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7671:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d}),a(7113),a(8952),a(5866);var r=a(3191),s=a(8716),i=a(7922),n=a.n(i),l=a(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let d=["",{children:["stories",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,7113)),"D:\\Projects\\Git Local\\kod\\app\\stories\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,8952)),"D:\\Projects\\Git Local\\kod\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\Projects\\Git Local\\kod\\app\\stories\\page.tsx"],u="/stories/page",p={require:a,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/stories/page",pathname:"/stories",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1603:(e,t,a)=>{Promise.resolve().then(a.bind(a,6086)),Promise.resolve().then(a.bind(a,9793))},6543:(e,t,a)=>{Promise.resolve().then(a.bind(a,3512)),Promise.resolve().then(a.t.bind(a,9404,23))},2719:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},6086:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var r=a(326),s=a(7577);function i(){let[e,t]=(0,s.useState)(!1),[a,i]=(0,s.useState)(!1);return(0,s.useRef)(null),(0,s.useRef)(null),r.jsx("div",{className:"fixed bottom-4 right-4 z-[100]",children:r.jsx("button",{onClick:()=>t(!e),className:"bg-black/50 hover:bg-black/80 text-primary-2 border border-primary-2 rounded-full p-3 transition-all duration-300 backdrop-blur-sm","aria-label":e?"Unmute":"Mute",children:e?r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75 19.5 12m0 0 2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6 4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"})}):r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"})})})})}},9793:(e,t,a)=>{"use strict";a.d(t,{default:()=>l});var r=a(326),s=a(7577),i=a(9086),n=a(2106);function l(){let[e,t]=(0,s.useState)(!0);return r.jsx(i.M,{children:e&&r.jsx(n.E.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:1},className:"fixed inset-0 z-[9999] flex flex-col items-center justify-center bg-black text-center p-4",children:(0,r.jsxs)(n.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.8},className:"max-w-2xl w-full space-y-8",children:[r.jsx("h1",{className:"text-5xl md:text-7xl font-black text-[#8a0014] drop-shadow-[0_0_30px_rgba(138,0,20,0.8)] font-cairo",children:"تحذير"}),(0,r.jsxs)("p",{className:"text-xl md:text-2xl text-gray-300 font-cairo leading-relaxed",children:["هذا الموقع يحتوي على أصوات ومؤثرات مرعبة.",r.jsx("br",{}),"ينصح بارتداء سماعات الرأس لتجربة كاملة."]}),r.jsx("button",{onClick:()=>{t(!1)},className:"group relative inline-flex items-center justify-center px-12 py-4 text-2xl font-bold text-white transition-all duration-300 bg-[#8a0014] hover:bg-[#b3001b] hover:scale-105 hover:shadow-[0_0_50px_rgba(180,0,30,0.8)]",style:{clipPath:"polygon(0% 0%, 100% 0%, 95% 50%, 100% 100%, 0% 100%, 5% 50%)"},children:r.jsx("span",{className:"relative z-10 font-cairo",children:"أدخل إذا كنت تجرؤ"})})]})})})}},3512:(e,t,a)=>{"use strict";a.d(t,{default:()=>l});var r=a(326),s=a(6226),i=a(17),n=a.n(i);function l({title:e,excerpt:t,image:a,slug:i}){return(0,r.jsxs)("div",{className:n().card,children:[(0,r.jsxs)("div",{className:n().imageWrapper,children:[r.jsx("div",{className:n().crackLine}),r.jsx(s.default,{src:a,alt:e,width:400,height:225,className:n().image})]}),(0,r.jsxs)("div",{className:n().content,children:[r.jsx("h3",{className:"font-cairo font-bold text-xl text-secondary-3 mb-2",children:e}),r.jsx("p",{className:"font-inter text-sm text-secondary-3 opacity-70 line-clamp-3",children:t})]})]})}},6226:(e,t,a)=>{"use strict";a.d(t,{default:()=>s.a});var r=a(9029),s=a.n(r)},9029:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return o},getImageProps:function(){return l}});let r=a(1174),s=a(3078),i=a(2481),n=r._(a(6820));function l(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let o=i.Image},17:e=>{e.exports={card:"StoryCard_card__pQRE_",image:"StoryCard_image__Y2f_5",crackLine:"StoryCard_crackLine__ZBYFG",imageWrapper:"StoryCard_imageWrapper__mHWvp",content:"StoryCard_content__osHhd"}},8952:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>_,metadata:()=>b});var r=a(9510),s=a(4203),i=a.n(s),n=a(7851),l=a.n(n),o=a(2286),d=a.n(o),c=a(5521),u=a.n(c),p=a(252),h=a.n(p);a(7633);var m=a(5761),x=a(8570);let f=(0,x.createProxy)(String.raw`D:\Projects\Git Local\kod\components\Audio\AudioManager.tsx#default`),g=(0,x.createProxy)(String.raw`D:\Projects\Git Local\kod\components\Landing\WelcomeOverlay.tsx#default`),b={title:"Kingdom of Darkness | مملكة الظلام",description:"Tales that cross the line between reality and nightmares. حكايات تتجاوز الخط الفاصل بين الواقع والكوابيس."};function _({children:e}){return r.jsx("html",{lang:"ar",dir:"rtl",children:(0,r.jsxs)("body",{className:(0,m.Z)(i().variable,l().variable,d().variable,u().variable,h().variable,"font-cairo antialiased"),children:[r.jsx(g,{}),r.jsx(f,{}),e]})})}},7113:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d,dynamic:()=>l});var r=a(9510),s=a(7371);let i=(0,a(8570).createProxy)(String.raw`D:\Projects\Git Local\kod\components\StoryCard\StoryCard.client.tsx#default`);var n=a(9487);let l="force-dynamic";async function o(){return await n.db.connect(),n.db.getStories({status:"published",limit:50})}async function d(){let{data:e}=await o();return r.jsx("div",{className:"min-h-screen bg-primary-1 text-secondary-3 p-8 pt-24",children:(0,r.jsxs)("div",{className:"container mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-12",children:[(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[r.jsx("h1",{className:"text-4xl font-cairo font-bold text-accent",children:"قصص الرعب"}),r.jsx(s.default,{href:"/stories/submit",className:"bg-secondary-2 border border-accent text-accent px-4 py-2 rounded hover:bg-accent hover:text-primary-1 transition-colors text-sm font-bold",children:"ابعت قصتك"})]}),r.jsx(s.default,{href:"/",className:"text-primary-2 hover:text-accent transition-colors font-bold",children:"← العودة للرئيسية"})]}),0===e.length?r.jsx("p",{className:"text-center text-xl opacity-50",children:"لا توجد قصص منشورة حالياً."}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map(e=>r.jsx(s.default,{href:`/story/${e.slug}`,children:r.jsx(i,{title:e.title_ar,excerpt:e.excerpt_ar,image:e.cover_image,slug:e.slug})},e.id))})]})})}},9487:(e,t,a)=>{"use strict";a.d(t,{db:()=>s});class r{constructor(){this.supabase=null,this.url="https://jumuwymzngswknsoizdb.supabase.co",this.key=process.env.SUPABASE_SERVICE_ROLE_KEY||process.env.SUPABASE_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp1bXV3eW16bmdzd2tuc29pemRiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQzNDg2MzMsImV4cCI6MjA3OTkyNDYzM30.4osfj8bUa4Ckw5gAPRY0hZ-MbQjodKS_Tg9GMs3B3B4"}async getClient(){if(!this.url||!this.key)return null;if(this.supabase)return this.supabase;let{createClient:e}=await a.e(674).then(a.bind(a,5674));return this.supabase=e(this.url,this.key,{auth:{persistSession:!1}}),this.supabase}async connect(){await this.getClient()}async getStories(e){let t=await this.getClient();if(!t)throw Error("Supabase not configured");let a=e?.page||1,r=e?.limit||10,s=(a-1)*r,i=t.from("Story").select("*",{count:"exact"}).order("created_at",{ascending:!1}).range(s,s+r-1);e?.status&&(i=i.eq("status",e.status));let{data:n,error:l,count:o}=await i;if(l)throw l;return{data:(n||[]).map(e=>({...e,created_at:e.created_at?new Date(e.created_at):null,updated_at:e.updated_at?new Date(e.updated_at):null,publish_date:e.publish_date?new Date(e.publish_date):null})),meta:{total:o||0,page:a,limit:r}}}async getStoryBySlug(e){let t=await this.getClient();if(!t)return null;let{data:a,error:r}=await t.from("Story").select("*").eq("slug",e).single();return r?null:{...a,created_at:a.created_at?new Date(a.created_at):null,updated_at:a.updated_at?new Date(a.updated_at):null,publish_date:a.publish_date?new Date(a.publish_date):null}}async getStoryById(e){let t=await this.getClient();if(!t)return null;let{data:a,error:r}=await t.from("Story").select("*").eq("id",e).single();return r?null:{...a,created_at:a.created_at?new Date(a.created_at):null,updated_at:a.updated_at?new Date(a.updated_at):null,publish_date:a.publish_date?new Date(a.publish_date):null}}async createStory(e){let t=await this.getClient();if(!t)throw Error("Supabase not configured");let a=Object.fromEntries(Object.entries(e).filter(([e,t])=>void 0!==t)),{data:r,error:s}=await t.from("Story").insert(a).select().single();if(s)throw s;return{...r,created_at:r.created_at?new Date(r.created_at):null,updated_at:r.updated_at?new Date(r.updated_at):null,publish_date:r.publish_date?new Date(r.publish_date):null}}async updateStory(e,t){let a=await this.getClient();if(!a)throw Error("Supabase not configured");let r=Object.fromEntries(Object.entries(t).filter(([e,t])=>void 0!==t)),{data:s,error:i}=await a.from("Story").update(r).eq("id",e).select().single();if(i)throw i;return{...s,created_at:s.created_at?new Date(s.created_at):null,updated_at:s.updated_at?new Date(s.updated_at):null,publish_date:s.publish_date?new Date(s.publish_date):null}}async deleteStory(e){let t=await this.getClient();if(!t)throw Error("Supabase not configured");let{error:a}=await t.from("Story").delete().eq("id",e);if(a)throw a}async uploadMedia(e){let t=await this.getClient();if(!t)throw Error("Supabase not configured");let a=`${Date.now()}-${e&&e.name||"upload"}`,r=e.buffer??e,{data:s,error:i}=await t.storage.from("media").upload(a,r,{cacheControl:"3600",upsert:!1});if(i)throw i;let{data:n}=t.storage.from("media").getPublicUrl(s.path);return{path:s.path,url:n.publicUrl}}async listMedia(e){let t=await this.getClient();if(!t)return[];let{data:a,error:r}=await t.from("Media").select("*");return r?[]:(a||[]).map(e=>({...e,uploaded_at:e.uploaded_at?new Date(e.uploaded_at):null}))}}let s=new r},7371:(e,t,a)=>{"use strict";a.d(t,{default:()=>s.a});var r=a(1812),s=a.n(r)},1812:(e,t,a)=>{"use strict";let{createProxy:r}=a(8570);e.exports=r("D:\\Projects\\Git Local\\kod\\node_modules\\next\\dist\\client\\link.js")},7633:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[276,319,404,481],()=>a(7671));module.exports=r})();