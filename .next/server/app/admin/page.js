(()=>{var e={};e.id=3,e.ids=[3],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},413:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>o}),a(8748),a(596),a(8952),a(5866);var r=a(3191),s=a(8716),i=a(7922),n=a.n(i),l=a(5231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);a.d(t,d);let o=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,8748)),"D:\\Projects\\Git Local\\kod\\app\\admin\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,596)),"D:\\Projects\\Git Local\\kod\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,8952)),"D:\\Projects\\Git Local\\kod\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\Projects\\Git Local\\kod\\app\\admin\\page.tsx"],u="/admin/page",p={require:a,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},4336:(e,t,a)=>{Promise.resolve().then(a.bind(a,6086)),Promise.resolve().then(a.bind(a,9793))},2719:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},4894:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,9404,23))},2171:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,9404,23))},6086:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var r=a(326),s=a(7577);function i(){let[e,t]=(0,s.useState)(!1),[a,i]=(0,s.useState)(!1);return(0,s.useRef)(null),(0,s.useRef)(null),r.jsx("div",{className:"fixed bottom-4 right-4 z-[100]",children:r.jsx("button",{onClick:()=>t(!e),className:"bg-black/50 hover:bg-black/80 text-primary-2 border border-primary-2 rounded-full p-3 transition-all duration-300 backdrop-blur-sm","aria-label":e?"Unmute":"Mute",children:e?r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75 19.5 12m0 0 2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6 4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"})}):r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"})})})})}},9793:(e,t,a)=>{"use strict";a.d(t,{default:()=>l});var r=a(326),s=a(7577),i=a(9086),n=a(2106);function l(){let[e,t]=(0,s.useState)(!0);return r.jsx(i.M,{children:e&&r.jsx(n.E.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:1},className:"fixed inset-0 z-[9999] flex flex-col items-center justify-center bg-black text-center p-4",children:(0,r.jsxs)(n.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.8},className:"max-w-2xl w-full space-y-8",children:[r.jsx("h1",{className:"text-5xl md:text-7xl font-black text-[#8a0014] drop-shadow-[0_0_30px_rgba(138,0,20,0.8)] font-cairo",children:"تحذير"}),(0,r.jsxs)("p",{className:"text-xl md:text-2xl text-gray-300 font-cairo leading-relaxed",children:["هذا الموقع يحتوي على أصوات ومؤثرات مرعبة.",r.jsx("br",{}),"ينصح بارتداء سماعات الرأس لتجربة كاملة."]}),r.jsx("button",{onClick:()=>{t(!1)},className:"group relative inline-flex items-center justify-center px-12 py-4 text-2xl font-bold text-white transition-all duration-300 bg-[#8a0014] hover:bg-[#b3001b] hover:scale-105 hover:shadow-[0_0_50px_rgba(180,0,30,0.8)]",style:{clipPath:"polygon(0% 0%, 100% 0%, 95% 50%, 100% 100%, 0% 100%, 5% 50%)"},children:r.jsx("span",{className:"relative z-10 font-cairo",children:"أدخل إذا كنت تجرؤ"})})]})})})}},596:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n,metadata:()=>i});var r=a(9510);a(7633);var s=a(7371);let i={title:"Kingdom of Darkness | Admin",description:"Admin Dashboard"};function n({children:e}){return(0,r.jsxs)("div",{className:"min-h-screen bg-secondary-1 text-secondary-3 font-cairo",dir:"rtl",children:[(0,r.jsxs)(s.default,{href:"/",className:"fixed bottom-8 left-8 z-50 bg-primary-2 text-secondary-3 px-6 py-3 rounded-full shadow-lg hover:bg-red-900 transition-all hover:scale-105 font-bold flex items-center gap-2",children:[r.jsx("span",{children:"العودة للموقع"}),r.jsx("span",{className:"text-xl",children:"←"})]}),r.jsx("main",{className:"p-4",children:e})]})}},8748:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d,dynamic:()=>n});var r=a(9510),s=a(7371),i=a(9487);let n="force-dynamic";async function l(){return await i.db.connect(),i.db.getStories({limit:100})}async function d(){let{data:e}=await l();return(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-accent",children:"إدارة القصص"}),(0,r.jsxs)("div",{className:"flex gap-4",children:[r.jsx("button",{className:"text-primary-2 hover:text-red-500 transition-colors",children:"تسجيل الخروج"}),r.jsx(s.default,{href:"/admin/stories/new",className:"bg-primary-2 text-secondary-3 px-6 py-2 rounded hover:bg-red-900 transition-colors",children:"إضافة قصة جديدة"})]})]}),r.jsx("div",{className:"bg-secondary-2 rounded-lg overflow-hidden",children:(0,r.jsxs)("table",{className:"w-full text-right",children:[r.jsx("thead",{className:"bg-primary-1 text-accent",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"p-4",children:"العنوان"}),r.jsx("th",{className:"p-4",children:"الحالة"}),r.jsx("th",{className:"p-4",children:"تاريخ النشر"}),r.jsx("th",{className:"p-4",children:"الإجراءات"})]})}),r.jsx("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{className:"border-t border-secondary-1 hover:bg-secondary-1/50",children:[r.jsx("td",{className:"p-4 font-bold",children:e.title_ar}),r.jsx("td",{className:"p-4",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs ${"published"===e.status?"bg-green-900 text-green-100":"draft"===e.status?"bg-yellow-900 text-yellow-100":"bg-gray-700"}`,children:"published"===e.status?"منشور":"draft"===e.status?"مسودة":"مؤرشف"})}),r.jsx("td",{className:"p-4 opacity-70",children:new Date(e.created_at).toLocaleDateString("ar-EG")}),(0,r.jsxs)("td",{className:"p-4 flex gap-2",children:[r.jsx(s.default,{href:`/admin/stories/${e.id}/edit`,className:"text-accent hover:underline",children:"تعديل"}),r.jsx("button",{className:"text-red-500 hover:underline",children:"حذف"})]})]},e.id))})]})})]})}},8952:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w,metadata:()=>g});var r=a(9510),s=a(4203),i=a.n(s),n=a(7851),l=a.n(n),d=a(2286),o=a.n(d),c=a(5521),u=a.n(c),p=a(252),h=a.n(p);a(7633);var m=a(5761),x=a(8570);let b=(0,x.createProxy)(String.raw`D:\Projects\Git Local\kod\components\Audio\AudioManager.tsx#default`),f=(0,x.createProxy)(String.raw`D:\Projects\Git Local\kod\components\Landing\WelcomeOverlay.tsx#default`),g={title:"Kingdom of Darkness | مملكة الظلام",description:"Tales that cross the line between reality and nightmares. حكايات تتجاوز الخط الفاصل بين الواقع والكوابيس."};function w({children:e}){return r.jsx("html",{lang:"ar",dir:"rtl",children:(0,r.jsxs)("body",{className:(0,m.Z)(i().variable,l().variable,o().variable,u().variable,h().variable,"font-cairo antialiased"),children:[r.jsx(f,{}),r.jsx(b,{}),e]})})}},9487:(e,t,a)=>{"use strict";a.d(t,{db:()=>s});class r{constructor(){this.supabase=null,this.url="https://jumuwymzngswknsoizdb.supabase.co",this.key=process.env.SUPABASE_SERVICE_ROLE_KEY||process.env.SUPABASE_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp1bXV3eW16bmdzd2tuc29pemRiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQzNDg2MzMsImV4cCI6MjA3OTkyNDYzM30.4osfj8bUa4Ckw5gAPRY0hZ-MbQjodKS_Tg9GMs3B3B4"}async getClient(){if(!this.url||!this.key)return null;if(this.supabase)return this.supabase;let{createClient:e}=await a.e(674).then(a.bind(a,5674));return this.supabase=e(this.url,this.key,{auth:{persistSession:!1}}),this.supabase}async connect(){await this.getClient()}async getStories(e){let t=await this.getClient();if(!t)throw Error("Supabase not configured");let a=e?.page||1,r=e?.limit||10,s=(a-1)*r,i=t.from("Story").select("*",{count:"exact"}).order("created_at",{ascending:!1}).range(s,s+r-1);e?.status&&(i=i.eq("status",e.status));let{data:n,error:l,count:d}=await i;if(l)throw l;return{data:(n||[]).map(e=>({...e,created_at:e.created_at?new Date(e.created_at):null,updated_at:e.updated_at?new Date(e.updated_at):null,publish_date:e.publish_date?new Date(e.publish_date):null})),meta:{total:d||0,page:a,limit:r}}}async getStoryBySlug(e){let t=await this.getClient();if(!t)return null;let{data:a,error:r}=await t.from("Story").select("*").eq("slug",e).single();return r?null:{...a,created_at:a.created_at?new Date(a.created_at):null,updated_at:a.updated_at?new Date(a.updated_at):null,publish_date:a.publish_date?new Date(a.publish_date):null}}async getStoryById(e){let t=await this.getClient();if(!t)return null;let{data:a,error:r}=await t.from("Story").select("*").eq("id",e).single();return r?null:{...a,created_at:a.created_at?new Date(a.created_at):null,updated_at:a.updated_at?new Date(a.updated_at):null,publish_date:a.publish_date?new Date(a.publish_date):null}}async createStory(e){let t=await this.getClient();if(!t)throw Error("Supabase not configured");let a=Object.fromEntries(Object.entries(e).filter(([e,t])=>void 0!==t)),{data:r,error:s}=await t.from("Story").insert(a).select().single();if(s)throw s;return{...r,created_at:r.created_at?new Date(r.created_at):null,updated_at:r.updated_at?new Date(r.updated_at):null,publish_date:r.publish_date?new Date(r.publish_date):null}}async updateStory(e,t){let a=await this.getClient();if(!a)throw Error("Supabase not configured");let r=Object.fromEntries(Object.entries(t).filter(([e,t])=>void 0!==t)),{data:s,error:i}=await a.from("Story").update(r).eq("id",e).select().single();if(i)throw i;return{...s,created_at:s.created_at?new Date(s.created_at):null,updated_at:s.updated_at?new Date(s.updated_at):null,publish_date:s.publish_date?new Date(s.publish_date):null}}async deleteStory(e){let t=await this.getClient();if(!t)throw Error("Supabase not configured");let{error:a}=await t.from("Story").delete().eq("id",e);if(a)throw a}async uploadMedia(e){let t=await this.getClient();if(!t)throw Error("Supabase not configured");let a=`${Date.now()}-${e&&e.name||"upload"}`,r=e.buffer??e,{data:s,error:i}=await t.storage.from("media").upload(a,r,{cacheControl:"3600",upsert:!1});if(i)throw i;let{data:n}=t.storage.from("media").getPublicUrl(s.path);return{path:s.path,url:n.publicUrl}}async listMedia(e){let t=await this.getClient();if(!t)return[];let{data:a,error:r}=await t.from("Media").select("*");return r?[]:(a||[]).map(e=>({...e,uploaded_at:e.uploaded_at?new Date(e.uploaded_at):null}))}}let s=new r},7371:(e,t,a)=>{"use strict";a.d(t,{default:()=>s.a});var r=a(1812),s=a.n(r)},1812:(e,t,a)=>{"use strict";let{createProxy:r}=a(8570);e.exports=r("D:\\Projects\\Git Local\\kod\\node_modules\\next\\dist\\client\\link.js")},7633:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[276,319,404],()=>a(413));module.exports=r})();