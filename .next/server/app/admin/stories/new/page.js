(()=>{var e={};e.id=291,e.ids=[291],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6763:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),r(4156),r(596),r(8952),r(5866);var s=r(3191),a=r(8716),n=r(7922),o=r.n(n),l=r(5231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(t,i);let d=["",{children:["admin",{children:["stories",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4156)),"D:\\Projects\\Git Local\\kod\\app\\admin\\stories\\new\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,596)),"D:\\Projects\\Git Local\\kod\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,8952)),"D:\\Projects\\Git Local\\kod\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\Projects\\Git Local\\kod\\app\\admin\\stories\\new\\page.tsx"],u="/admin/stories/new/page",x={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/stories/new/page",pathname:"/admin/stories/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8932:(e,t,r)=>{Promise.resolve().then(r.bind(r,8620)),Promise.resolve().then(r.t.bind(r,9404,23))},4336:(e,t,r)=>{Promise.resolve().then(r.bind(r,6086)),Promise.resolve().then(r.bind(r,9793))},2719:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},4894:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,9404,23))},8620:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var s=r(326),a=r(7577),n=r(5047);function o({initialData:e,isNew:t=!1}){let r=(0,n.useRouter)(),[o,l]=(0,a.useState)(e||{title_ar:"",title_en:"",slug:"",excerpt_ar:"",body_markdown_ar:"",cover_image:"",status:"draft"}),[i,d]=(0,a.useState)(!1),c=async s=>{s.preventDefault(),d(!0);let a=t?"/api/admin/stories":`/api/admin/stories/${e.id}`,n=o.body_markdown_ar.replace(/^# (.*$)/gim,"<h1>$1</h1>").replace(/^## (.*$)/gim,"<h2>$1</h2>").replace(/\n/gim,"<br />");try{(await fetch(a,{method:t?"POST":"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...o,body_html_ar:n})})).ok?(r.push("/admin/stories"),r.refresh()):alert("حدث خطأ أثناء الحفظ")}catch(e){console.error(e),alert("حدث خطأ")}finally{d(!1)}};return(0,s.jsxs)("form",{onSubmit:c,className:"bg-secondary-1 p-8 rounded-lg shadow-lg border border-secondary-2",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-bold mb-2 text-accent",children:"العنوان (عربي)"}),s.jsx("input",{type:"text",required:!0,className:"w-full p-3 bg-secondary-2 border border-secondary-2 rounded focus:border-accent focus:outline-none text-secondary-3",value:o.title_ar,onChange:e=>l({...o,title_ar:e.target.value})})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-bold mb-2 text-accent",children:"العنوان (إنجليزي - اختياري)"}),s.jsx("input",{type:"text",className:"w-full p-3 bg-secondary-2 border border-secondary-2 rounded focus:border-accent focus:outline-none text-secondary-3",value:o.title_en||"",onChange:e=>l({...o,title_en:e.target.value}),dir:"ltr"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-bold mb-2 text-accent",children:"الرابط (Slug)"}),s.jsx("input",{type:"text",className:"w-full p-3 bg-secondary-2 border border-secondary-2 rounded focus:border-accent focus:outline-none text-secondary-3",value:o.slug,onChange:e=>l({...o,slug:e.target.value}),dir:"ltr"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-bold mb-2 text-accent",children:"صورة الغلاف (رابط)"}),s.jsx("input",{type:"text",required:!0,className:"w-full p-3 bg-secondary-2 border border-secondary-2 rounded focus:border-accent focus:outline-none text-secondary-3",value:o.cover_image,onChange:e=>l({...o,cover_image:e.target.value}),dir:"ltr"})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-bold mb-2 text-accent",children:"مقتطف قصير"}),s.jsx("textarea",{required:!0,rows:3,className:"w-full p-3 bg-secondary-2 border border-secondary-2 rounded focus:border-accent focus:outline-none text-secondary-3",value:o.excerpt_ar,onChange:e=>l({...o,excerpt_ar:e.target.value})})]}),(0,s.jsxs)("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-bold mb-2 text-accent",children:"محتوى القصة (Markdown)"}),s.jsx("textarea",{required:!0,rows:15,className:"w-full p-3 bg-secondary-2 border border-secondary-2 rounded focus:border-accent focus:outline-none text-secondary-3 font-mono",value:o.body_markdown_ar,onChange:e=>l({...o,body_markdown_ar:e.target.value})})]}),(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("label",{className:"block text-sm font-bold mb-2 text-accent",children:"الحالة"}),(0,s.jsxs)("select",{className:"w-full p-3 bg-secondary-2 border border-secondary-2 rounded focus:border-accent focus:outline-none text-secondary-3",value:o.status,onChange:e=>l({...o,status:e.target.value}),children:[s.jsx("option",{value:"draft",children:"مسودة"}),s.jsx("option",{value:"published",children:"منشور"}),s.jsx("option",{value:"archived",children:"مؤرشف"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[s.jsx("button",{type:"button",onClick:()=>r.back(),className:"px-6 py-3 rounded text-secondary-3 hover:bg-secondary-2 transition-colors",children:"إلغاء"}),s.jsx("button",{type:"submit",disabled:i,className:"bg-primary-2 text-secondary-3 px-8 py-3 rounded font-bold hover:bg-red-900 transition-colors disabled:opacity-50",children:i?"جاري الحفظ...":"حفظ القصة"})]})]})}},6086:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var s=r(326),a=r(7577);function n(){let[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)(!1);return(0,a.useRef)(null),(0,a.useRef)(null),s.jsx("div",{className:"fixed bottom-4 right-4 z-[100]",children:s.jsx("button",{onClick:()=>t(!e),className:"bg-black/50 hover:bg-black/80 text-primary-2 border border-primary-2 rounded-full p-3 transition-all duration-300 backdrop-blur-sm","aria-label":e?"Unmute":"Mute",children:e?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75 19.5 12m0 0 2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6 4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"})}):s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"})})})})}},9793:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var s=r(326),a=r(7577),n=r(9086),o=r(2106);function l(){let[e,t]=(0,a.useState)(!0);return s.jsx(n.M,{children:e&&s.jsx(o.E.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:1},className:"fixed inset-0 z-[9999] flex flex-col items-center justify-center bg-black text-center p-4",children:(0,s.jsxs)(o.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.8},className:"max-w-2xl w-full space-y-8",children:[s.jsx("h1",{className:"text-5xl md:text-7xl font-black text-[#8a0014] drop-shadow-[0_0_30px_rgba(138,0,20,0.8)] font-cairo",children:"تحذير"}),(0,s.jsxs)("p",{className:"text-xl md:text-2xl text-gray-300 font-cairo leading-relaxed",children:["هذا الموقع يحتوي على أصوات ومؤثرات مرعبة.",s.jsx("br",{}),"ينصح بارتداء سماعات الرأس لتجربة كاملة."]}),s.jsx("button",{onClick:()=>{t(!1)},className:"group relative inline-flex items-center justify-center px-12 py-4 text-2xl font-bold text-white transition-all duration-300 bg-[#8a0014] hover:bg-[#b3001b] hover:scale-105 hover:shadow-[0_0_50px_rgba(180,0,30,0.8)]",style:{clipPath:"polygon(0% 0%, 100% 0%, 95% 50%, 100% 100%, 0% 100%, 5% 50%)"},children:s.jsx("span",{className:"relative z-10 font-cairo",children:"أدخل إذا كنت تجرؤ"})})]})})})}},5047:(e,t,r)=>{"use strict";var s=r(7389);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},596:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>n});var s=r(9510);r(7633);var a=r(7371);let n={title:"Kingdom of Darkness | Admin",description:"Admin Dashboard"};function o({children:e}){return(0,s.jsxs)("div",{className:"min-h-screen bg-secondary-1 text-secondary-3 font-cairo",dir:"rtl",children:[(0,s.jsxs)(a.default,{href:"/",className:"fixed bottom-8 left-8 z-50 bg-primary-2 text-secondary-3 px-6 py-3 rounded-full shadow-lg hover:bg-red-900 transition-all hover:scale-105 font-bold flex items-center gap-2",children:[s.jsx("span",{children:"العودة للموقع"}),s.jsx("span",{className:"text-xl",children:"←"})]}),s.jsx("main",{className:"p-4",children:e})]})}},4156:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(9510),a=r(562),n=r(7371);function o(){return(0,s.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-accent",children:"إضافة قصة جديدة"}),s.jsx(n.default,{href:"/admin",className:"bg-secondary-2 text-secondary-3 px-6 py-2 rounded hover:bg-secondary-3 hover:text-primary-1 transition-colors",children:"← لوحة التحكم"})]}),s.jsx(a.Z,{isNew:!0})]})}},8952:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v,metadata:()=>g});var s=r(9510),a=r(4203),n=r.n(a),o=r(7851),l=r.n(o),i=r(2286),d=r.n(i),c=r(5521),u=r.n(c),x=r(252),m=r.n(x);r(7633);var b=r(5761),p=r(8570);let h=(0,p.createProxy)(String.raw`D:\Projects\Git Local\kod\components\Audio\AudioManager.tsx#default`),f=(0,p.createProxy)(String.raw`D:\Projects\Git Local\kod\components\Landing\WelcomeOverlay.tsx#default`),g={title:"Kingdom of Darkness | مملكة الظلام",description:"Tales that cross the line between reality and nightmares. حكايات تتجاوز الخط الفاصل بين الواقع والكوابيس."};function v({children:e}){return s.jsx("html",{lang:"ar",dir:"rtl",children:(0,s.jsxs)("body",{className:(0,b.Z)(n().variable,l().variable,d().variable,u().variable,m().variable,"font-cairo antialiased"),children:[s.jsx(f,{}),s.jsx(h,{}),e]})})}},562:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(8570).createProxy)(String.raw`D:\Projects\Git Local\kod\components\AdminUI\StoryEditor.client.tsx#default`)},7371:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(1812),a=r.n(s)},1812:(e,t,r)=>{"use strict";let{createProxy:s}=r(8570);e.exports=s("D:\\Projects\\Git Local\\kod\\node_modules\\next\\dist\\client\\link.js")},7633:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,319,404],()=>r(6763));module.exports=s})();